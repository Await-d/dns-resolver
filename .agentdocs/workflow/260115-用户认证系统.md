# 用户认证系统实现

## 任务概述

实现完整的用户登录认证系统，包括 JWT Token 认证、默认管理员账号初始化、密码修改功能。

## 实现计划

### 阶段 1：后端领域层
- [x] T-01: 创建 User 实体和 IUserRepository 接口
- [x] T-02: 创建密码哈希服务

### 阶段 2：后端应用层
- [x] T-03: 创建登录命令和处理器
- [x] T-04: 创建修改密码命令和处理器
- [x] T-05: 创建 JWT Token 服务

### 阶段 3：后端基础设施层
- [x] T-06: 实现 InMemoryUserRepository（含默认管理员）
- [x] T-07: 添加 JWT 认证中间件配置

### 阶段 4：后端 API 层
- [x] T-08: 创建 AuthController

### 阶段 5：前端对接
- [x] T-09: 创建认证 API 服务
- [x] T-10: 更新 AuthContext 对接真实 API

## 技术要点

- JWT Bearer Token 认证
- PBKDF2-SHA256 密码哈希 (100000 iterations)
- 默认管理员: admin / admin123
- Token 有效期: 60 分钟（可配置）

## 完成状态

✅ 所有任务已完成

### 创建的文件

**后端:**
- `DnsResolver.Domain/Aggregates/User/User.cs` - 用户实体
- `DnsResolver.Domain/Aggregates/User/IUserRepository.cs` - 用户仓储接口
- `DnsResolver.Domain/Services/IPasswordHasher.cs` - 密码哈希接口
- `DnsResolver.Application/Commands/Auth/LoginCommand.cs` - 登录命令
- `DnsResolver.Application/Commands/Auth/LoginCommandHandler.cs` - 登录处理器
- `DnsResolver.Application/Commands/Auth/ChangePasswordCommand.cs` - 修改密码命令
- `DnsResolver.Application/Commands/Auth/ChangePasswordCommandHandler.cs` - 修改密码处理器
- `DnsResolver.Application/Services/IJwtTokenService.cs` - JWT 服务接口
- `DnsResolver.Infrastructure/Services/PasswordHasher.cs` - 密码哈希实现
- `DnsResolver.Infrastructure/Services/JwtTokenService.cs` - JWT 服务实现
- `DnsResolver.Infrastructure/Repositories/InMemoryUserRepository.cs` - 用户仓储实现
- `DnsResolver.Api/Controllers/AuthController.cs` - 认证控制器

**前端:**
- `frontend/src/services/authApi.ts` - 认证 API 服务
- `frontend/src/contexts/AuthContext.tsx` - 更新对接真实 API
